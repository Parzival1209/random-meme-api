<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Random Meme</title>
  <script>
    async function go() {
      try {
        // Load memes.json file
        const response = await fetch("./memes.json");
        const list = await response.json();
        // Pick a random URL
        const url = list[Math.floor(Math.random() * list.length)];
        const imageContainer = document.getElementById('imageContainer');
        const img = new Image();
        
        // If it starts with http:// or https://
        if (file.startsWith("http://") || file.startsWith("https://")) {
          img.src = url;
          img.alt = "Random Meme";
          img.style.maxWidth = "100%";
          img.style.height = "auto";
          imageContainer.innerHTML = "";
          imageContainer.appendChild(img);
        }
        // Else treat it as a file in ./memes
        else {
          img.src = "https://parzival1209.github.io/random-meme-api/" + url;
          img.alt = "Random Meme";
          img.style.maxWidth = "100%";
          img.style.height = "auto";
          imageContainer.innerHTML = "";
          imageContainer.appendChild(img);
        }
      } catch (e) {
        document.body.innerText = "Error loading meme list: " + e;
      }
    }
    go();
  </script>
</head>
<body>
  <div id="imageContainer" style="text-align:center; overflow-y:auto; display:flex; gap:8px;"></div>
</body>
</html>
